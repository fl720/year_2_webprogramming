<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HIIT</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: rgb(178, 214, 255);
            padding: 20px;
        }
        .exercise-title {
            font-size: 2em;
            margin-bottom: 10px;
        }
        .exercise-statement {
            width: 80%;
            max-height: 100px;
            overflow-y: auto;
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #333;
            box-sizing: border-box;
        }
        .clock-container {
            width: 100%;
            max-width: 220px;
            aspect-ratio: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        .clock {
            width: 100%;
            height: 100%;
            border: 10px solid #333;
            border-radius: 50%;
            position: relative;
            background-color: #fff;
            margin-bottom: 20px;
        }
        .hand {
            width: 100%;
            height: 2px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform-origin: 0 0;
            transform: rotate(0deg) translateX(-50%);
        }
        .hand::before {
            content: '';
            position: absolute;
            width: 90%;
            height: 100%;
            background: transparent;
            border-radius: 1px;
            left: 0;
        }
        .hand::after {
            content: '';
            position: absolute;
            width: 10%;
            height: 100%;
            background: red;
            border-radius: 1px;
            right: 0;
        }
        .clock-text {
            position: absolute;
            width: 100%;
            text-align: center;
            font-size: 2em;
            top: 50%;
            transform: translateY(-50%);
            font-family: Arial, sans-serif;
        }
        .controls {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .controls input {
            margin: 5px;
            padding: 5px;
            font-size: 1em;
        }
        .controls button {
            margin: 5px;
            padding: 10px;
            font-size: 1em;
        }
    </style>
</head>
<body>
    <div class="exercise-title">Push Up</div>
    <div class="exercise-statement" id="exercise-statement">Here you can put long sentences or multiple lines of text. If the content is too long, a scrollbar will appear.</div>
    <div class="clock-container">
        <div class="clock" id="clock">
            <div class="hand" id="second-hand"></div>
            <div class="clock-text" id="clock-text">0:00:00</div>
        </div>
    </div>
    <div class="controls">
        <input type="number" id="hours" placeholder="Hours" min="0">
        <input type="number" id="minutes" placeholder="Minutes" min="0">
        <input type="number" id="seconds" placeholder="Seconds" min="0">
        <button id="start">Start</button>
        <button id="pause">Pause</button>
        <button id="reset">Reset</button>
    </div>

    <script>
        const clockText = document.getElementById('clock-text');
        const secondHand = document.getElementById('second-hand');
        const startButton = document.getElementById('start');
        const pauseButton = document.getElementById('pause');
        const resetButton = document.getElementById('reset');
        const hoursInput = document.getElementById('hours');
        const minutesInput = document.getElementById('minutes');
        const secondsInput = document.getElementById('seconds');

        let totalTime = 0;
        let timeLeft = 0;
        let timer;
        let isPaused = false;

        function playBeep(frequency) {
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioCtx.createOscillator();
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);
            oscillator.connect(audioCtx.destination);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.2);
        }

        function updateClockText() {
            const hours = Math.floor(timeLeft / 3600);
            const minutes = Math.floor((timeLeft % 3600) / 60);
            const seconds = timeLeft % 60;
            clockText.textContent = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function updateSecondHand() {
            const totalSeconds = totalTime;
            const elapsedSeconds = totalTime - timeLeft;
            const angle = (((totalTime % 60) / 60) * 360 - 90 - (elapsedSeconds % 60) * 6);
            secondHand.style.transform = `rotate(${angle}deg) translateX(-50%)`;
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timer = setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                    updateClockText();
                    updateSecondHand();
                    if (timeLeft <= 5 && timeLeft > 0) {
                        playBeep(440);
                    } else if ( timeLeft == 0 ) { 
                        playBeep(493.8);
                    }
                } else {
                    clearInterval(timer);
                    // playBeep(493.8);
                    clockText.textContent = "Time's up!";
                    secondHand.style.transform = `rotate(-90deg) translateX(-50%)`;
                }
            }, 1000);
        }

        startButton.addEventListener('click', () => {
            clearInterval(timer);
            const hours = parseInt(hoursInput.value) || 0;
            const minutes = parseInt(minutesInput.value) || 0;
            const seconds = parseInt(secondsInput.value) || 0;
            totalTime = timeLeft = (hours * 3600) + (minutes * 60) + seconds;
            clockText.textContent = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            const initialAngle = ((totalTime % 60) / 60) * 360 - 90;
            secondHand.style.transform = `rotate(${initialAngle}deg) translateX(-50%)`;

            updateClockText();
            updateSecondHand();
            startTimer();
        });

        pauseButton.addEventListener('click', () => {
            if (isPaused) {
                startTimer();
                pauseButton.textContent = 'Pause';
            } else {
                clearInterval(timer);
                pauseButton.textContent = 'Resume';
            }
            isPaused = !isPaused;
        });

        resetButton.addEventListener('click', () => {
            clearInterval(timer);
            const hours = parseInt(hoursInput.value) || 0;
            const minutes = parseInt(minutesInput.value) || 0;
            const seconds = parseInt(secondsInput.value) || 0;
            totalTime = timeLeft = (hours * 3600) + (minutes * 60) + seconds;
            clockText.textContent = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            const initialAngle = ((totalTime % 60) / 60) * 360 - 90;
            secondHand.style.transform = `rotate(${initialAngle}deg) translateX(-50%)`;
            pauseButton.textContent = 'Pause';
            isPaused = false;
        });
    </script>
</body>
</html>
